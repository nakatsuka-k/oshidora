# プロフィール登録画面 設計書

---

## 画面名

* 画面ID：APP-00011（プロフィール登録）

  * ※本設計書は [docs/20260109全体画面仕様.md](docs/20260109全体画面仕様.md) の APP-00011 に合わせる。
* 画面名：プロフィール登録
* 目的：利用開始前に、ユーザーの基本プロフィール情報を登録する
* 遷移元：

  * SMS認証（APP-00010）完了直後
* 遷移先：

  * プロフィール登録完了（APP-00012）
  * （戻る導線を置く場合）登録フローを継続させる（途中離脱を防ぐ）

---

## 画面概要

* 入力項目

  * 表示名（ニックネーム）
  * プロフィール画像
  * ユーザーID（自動採番／表示のみ）
  * 自己紹介
  * リンク
* 登録後はアプリ利用を開始できる状態にする（トップへ遷移などは別途フロー側で統一）

---

## 画面キャプチャ / ワイヤー

* 画面遷移図「プロフィール登録」ノードを参照（添付画像）
* 本画面はフォーム中心（スクロール可能）

---

## 操作概要

* 表示名を入力
* プロフィール画像を選択（端末からアップロード）
* ユーザーID（自動採番）を確認（編集不可）
* 自己紹介を入力
* リンクを入力
* 「登録」押下で保存し、完了画面へ

---

## 詳細テーブル

| 部品名称       | 部品の種類    | 型    | 桁数  | IN | OUT | 初期値                              | 表示仕様                                   | エラーNo     | DB情報備考                            |
| :--------- | :------- | :--- | :-- | :- | :-- | :------------------------------- | :------------------------------------- | :-------- | :-------------------------------- |
| 画面タイトル     | 見出し      | 文字列  | 20  |    | ○   | `プロフィール登録`                       | 画面上部に表示                                |           |                                   |
| 説明文        | テキスト     | 文字列  | 120 |    | ○   | `あと少しで利用開始できます。プロフィールを登録してください。` | タイトル下に表示                               |           |                                   |
| プロフィール画像   | 画像アップロード | 画像   | -   | ○  | ○   | 未設定                              | サムネ表示＋「変更」ボタン。未設定時はプレースホルダー            | E-PRF-002 | 端末画像→アップロード→URL保存（users.avatar_url） |
| 表示名        | テキスト入力   | 文字列  | 50  | ○  |     | 空                                | プレースホルダー例：`推しドラ太郎`                     | E-PRF-001 | 前後トリム。重複可（users.display_name）        |
| ユーザーID（表示） | テキスト表示   | 文字列  | 30  |    | ○   | 自動採番                            | 変更不可。プロフィール表示などで利用                      | E-PRF-010 | サーバー採番（users.user_name 等）             |
| 自己紹介       | 複数行入力    | 文字列  | 300 | ○  |     | 空                                | TikTok風（任意）。改行可否は要件で統一                  | E-PRF-011 | users.bio 等                           |
| リンク        | テキスト入力   | URL  | 2048 | ○  |     | 空                                | 任意。URL形式チェック                             | E-PRF-012 | users.link_url 等                      |
| 登録ボタン      | ボタン      | -    | -   | ○  |     | 非活性                              | 必須項目が成立すると活性化。押下で保存 → 完了画面へ              | E-PRF-999 | POST `/api/profile` 相当                 |

---

## 挙動仕様

### 入力チェック

* 表示名

  * 文字数上限、使用禁止文字（改行・制御文字など）
* プロフィール画像

  * 容量上限（例：5MB）、形式（jpg/png/heic）
* ユーザーID

  * 表示のみ（編集不可）
* 自己紹介

  * 文字数上限
* リンク

  * URL形式チェック（任意入力）

### 登録ボタン

* 押下で保存処理開始 → ローディング表示 → 成功で完了画面へ
* 通信失敗時：画面上部にエラーメッセージ、入力内容は保持

---

## 画面メッセージ（例）

* 画像アップロード失敗：`画像のアップロードに失敗しました。通信状況を確認して再度お試しください。`
* メール形式不正：`メールアドレスの形式が正しくありません。`
* パスワード不一致：`パスワードが一致しません。`
* リンク形式不正：`リンクの形式が正しくありません。`
---

## 備考

* ユーザプロフィールの初回登録（APP-00011）は、全体画面仕様のとおり「画像/名前/ユーザーID（自動採番）/自己紹介/リンク」を対象とする。
* 会員登録フローは APP-00006〜APP-00010 を参照。
* マイページのプロフィール編集は APP-00054 を参照（編集項目は全体画面仕様で要確認となっているため、別途確定が必要）。
