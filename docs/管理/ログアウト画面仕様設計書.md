# 管理画面 ログアウト 画面設計書

---

## 画面名

* 画面ID：CMS-LOGOUT-001
* 画面名：ログアウト
* 目的：
  管理画面から安全にログアウトし、管理者セッションを破棄する
* 種別：Web（管理画面）

---

## 画面構成についての考え方（前提）

管理画面のログアウトは **2段階構成** を想定します。

1. **ログアウト確認（モーダル or 画面）**
2. **ログアウト完了 → ログイン画面へ遷移**

※ UX 的に一般的なため、確認画面は「モーダル表示」を基本想定
※ 実装都合で「専用画面」にしても成立するよう、画面設計として記載します

---

## 遷移関係

* 遷移元：

  * 管理画面内すべての画面

    * ヘッダー / サイドメニューの「ログアウト」操作
* 遷移先：

  * 管理画面ログイン（CMS_00001）

---

## ① ログアウト確認（モーダル／画面）

### 画面名

* 画面ID：CMS-LOGOUT-001-A
* 画面名：ログアウト確認

---

### 画面概要

* 誤操作防止のための確認表示
* セッション破棄はまだ行わない

---

### 表示内容

* タイトル：

  * `ログアウトしますか？`
* 説明文：

  * `管理画面からログアウトします。よろしいですか？`

---

### 操作ボタン

| ボタン   | 役割              |
| ----- | --------------- |
| キャンセル | ログアウトせず、元の画面に戻る |
| ログアウト | ログアウト処理を実行      |

---

### 挙動仕様（確認画面）

* キャンセル

  * モーダルを閉じる（元画面へ戻る）
* ログアウト

  * 管理者セッション削除
  * トークン / Cookie 無効化
  * ログアウト完了処理へ進む

---

## ② ログアウト完了（遷移）

### 画面名

* 画面ID：CMS-LOGOUT-001-B
* 画面名：ログアウト完了

※ 実際は **完了画面を表示せず即ログイン画面へリダイレクト** してもよい
（その場合はトースト表示のみ）

---

### 画面概要

* ログアウト完了をユーザーに明示
* ログイン画面への導線を提供

---

### 表示内容（表示する場合）

* メッセージ：

  * `ログアウトしました`
* 補足：

  * `再度ログインするには、ログイン画面から操作してください`

---

### 遷移

* 自動遷移：

  * 数秒後に管理画面ログイン（CMS_00001）へ
* もしくは：

  * `ログイン画面へ` ボタンを表示して手動遷移

---

## 詳細テーブル（確認画面）

| 部品名称   | 部品の種類 | 型   | IN | OUT | 表示仕様         | 備考     |
| ------ | ----- | --- | -- | --- | ------------ | ------ |
| 確認タイトル | 見出し   | 文字列 |    | ○   | `ログアウトしますか？` |        |
| 説明文    | テキスト  | 文字列 |    | ○   | 補足説明文        |        |
| キャンセル  | ボタン   | -   | ○  |     | グレー          | モーダル閉じ |
| ログアウト  | ボタン   | -   | ○  |     | 強調色          | 実行     |

---

## 詳細テーブル（完了／遷移）

| 部品名称    | 部品の種類 | 型   | IN | OUT | 表示仕様        | 備考  |
| ------- | ----- | --- | -- | --- | ----------- | --- |
| 完了メッセージ | テキスト  | 文字列 |    | ○   | `ログアウトしました` | 任意  |
| ログイン遷移  | 自動遷移  | -   |    | ○   | CMS_00001   | 主導線 |

---

## 挙動仕様（重要）

* ログアウト処理内容

  * 管理者セッション削除
  * 認証トークン破棄
  * Cookie 削除
* ログアウト後に戻る操作をしても

  * 管理画面へは遷移不可
  * 常にログイン画面へリダイレクト

---

## セキュリティ考慮

* ログアウト後のキャッシュ対策

  * ブラウザ戻るで管理画面が表示されないよう制御
* 別タブで開いていた管理画面も

  * API 呼び出し時に 401 を返す

---

## 備考

* 管理画面では **ログアウト完了画面を省略し、即ログイン画面遷移＋トースト表示** が最も一般的
* UX と実装コストのバランスで採用方式を決定
