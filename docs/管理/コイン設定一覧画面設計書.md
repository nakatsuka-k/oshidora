# 管理画面 コイン設定一覧 画面設計書

---

## 画面名

* 画面ID：CMS_00039
* 画面名：コイン設定一覧
* 種別：Web（管理画面）
* 目的：
  アプリ内で販売・表示する「コイン（またはコインパック）」の設定を一覧で管理し、新規作成・編集へ遷移できるようにする 
* 遷移元：

  * ダッシュボード（CMS_00002）
  * サイドメニュー「コイン設定」
* 遷移先：

  * コイン設定詳細・編集（CMS_00040） 
  * コイン設定新規登録（CMS_00041） 

---

## 画面概要

* コイン設定（コインパックの販売条件・表示条件）を一覧表示する
* 一覧から編集画面へ遷移できる
* 価格、表示場所、表示対象、表示期間などをキーに並び替え・絞り込みできる 

---

## 画面構成

### ヘッダー（共通）

* ロゴ／管理者名／ログアウト

### サイドメニュー（共通）

* ダッシュボード
* 動画管理
* お知らせ管理
* **コイン設定（選択中）**
* …（省略）

### メイン

1. 画面タイトル＋新規作成ボタン
2. 検索・絞り込みエリア
3. コイン設定一覧テーブル
4. ページネーション

---

## 操作概要

* 「コイン設定を作成」押下 → 新規登録（CMS_00041）へ遷移 
* 絞り込み条件を指定して「検索」 → 一覧更新
* 一覧行の「編集」押下（または行クリック） → 詳細・編集（CMS_00040）へ遷移 
* 一覧ヘッダークリックでソート（価格／表示場所／表示対象／表示期間 など） 

---

## 検索・絞り込みエリア

### 絞り込み項目（例）

| 項目    | 種別        | 内容                               |
| ----- | --------- | -------------------------------- |
| キーワード | テキスト      | 設定名（パック名）で部分一致                   |
| 表示場所  | セレクト      | 表示する画面・導線（例：コイン購入画面、動画購入導線など）    |
| 表示対象  | セレクト      | 対象ユーザー区分や条件（例：全ユーザー、特定ユーザー区分など）  |
| 表示期間  | 日付From/To | 期間内に表示される設定を抽出                   |
| ステータス | セレクト      | 表示中／非表示／期間外（運用しやすいので用意）          |
| 価格帯   | 数値From/To | コイン価格で絞り込み                       |

### ボタン

* 検索
* リセット

---

## 一覧テーブル

### 表示項目（例）

| 列名        | 表示内容        | 補足                   |
| --------- | ----------- | -------------------- |
| 設定ID      | システムID      |                      |
| 設定名（パック名） | 表示名         | 例：`100コイン` / `お得パック` |
| コイン数      | 付与されるコイン数   | 例：100 / 500          |
| 価格        | 金額          | ソート対象                |
| 表示場所      | どこに表示するか    | ソート対象                |
| 表示対象      | 誰に表示するか     | ソート対象                |
| 表示期間      | 開始〜終了       | ソート対象                |
| ステータス     | 表示中/非表示/期間外 | 一目で運用判断できる           |
| 更新日       | 最終更新日時      |                      |
| 操作        | 編集          | CMS_00040へ           |

### ステータス判定（表示例）

* 表示中：現在日時が表示期間内、かつ非表示フラグOFF
* 期間外：表示期間外
* 非表示：非表示フラグON

---

## ページネーション

* 1ページ：20件
* 前へ／次へ
* ページ番号

---

## 詳細テーブル

| 部品名称        | 部品の種類 | 型    | IN | OUT | 初期値       | 表示仕様                   | 備考          |
| :---------- | :---- | :--- | :- | :-- | :-------- | :--------------------- | :---------- |
| 画面タイトル      | 見出し   | 文字列  |    | ○   | `コイン設定一覧` | 左寄せ                    |             |
| 新規作成ボタン     | ボタン   | -    | ○  |     | -         | `コイン設定を作成`             | CMS_00041へ  |
| キーワード       | 入力    | 文字列  | ○  |     | 空         | 設定名検索                  |             |
| 表示場所        | セレクト  | ID   | ○  |     | 全て        | 表示場所で絞り込み              |             |
| 表示対象        | セレクト  | ID   | ○  |     | 全て        | 表示対象で絞り込み              |             |
| 表示期間From/To | 日付    | date | ○  |     | 空         | 期間絞り込み                 |             |
| ステータス       | セレクト  | ID   | ○  |     | 全て        | 表示中/非表示/期間外            |             |
| 検索ボタン       | ボタン   | -    | ○  |     | -         | 押下で一覧更新                |             |
| リセット        | ボタン   | -    | ○  |     | -         | 条件初期化                  |             |
| 一覧テーブル      | テーブル  | -    |    | ○   | -         | 価格/表示場所/表示対象/表示期間など表示  |             |
| 編集ボタン       | ボタン   | -    | ○  |     | -         | CMS_00040へ遷移           |             |
| ページネーション    | UI    | -    | ○  | ○   | 1ページ目     | 20件/ページ                |             |

---

## 挙動仕様

* 初期表示

  * 更新日降順（新しい順）
* ソート

  * 価格／表示場所／表示対象／表示期間で並び替え可能 
* 編集遷移

  * 「編集」押下 → CMS_00040（詳細・編集） 
* 新規作成遷移

  * 「コイン設定を作成」押下 → CMS_00041（新規登録） 
* 取得失敗

  * 画面上部にエラーバナー：`一覧を取得できませんでした`

---

## 備考

* コイン価格は「通貨（円）」表記で管理し、アプリ側は表示用フォーマットで整形
* 表示場所・表示対象は運用で増える可能性が高いため、コード値＋表示名のマスタ管理が扱いやすい
* 表示期間の終了が空の場合は「終了なし」として扱えるようにしておくと便利
