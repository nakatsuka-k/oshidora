# 管理画面 お知らせ一覧 画面設計書

---

## 画面名

* 画面ID：CMS_00021
* 画面名：お知らせ一覧（お知らせ管理）
* 種別：Web（管理画面）
* 目的：
  アプリに表示するお知らせを一覧で管理し、作成・編集（詳細）へ遷移できるようにする 
* 遷移元：

  * ダッシュボード（CMS_00002）
  * サイドメニュー「お知らせ管理」
* 遷移先：

  * お知らせ詳細（CMS_00022）
  * お知らせ新規登録（CMS_00023） 

---

## 画面概要

* 運営が配信する「お知らせ」を一覧で確認する画面
* 一覧から詳細（編集）へ入れる
* 新規作成ボタンから新規登録へ遷移する
* お知らせは「運営的なお知らせ」「イベント的なお知らせ」などのタグで分類する 

---

## 画面構成

### ヘッダー（共通）

* ロゴ／管理者名／ログアウト

### サイドメニュー（共通）

* ダッシュボード
* …（省略）
* お知らせ管理（選択中）

### メイン

1. 画面タイトル＋新規作成ボタン
2. 検索・絞り込み
3. 一覧テーブル
4. ページネーション

---

## 操作概要

* 右上「お知らせを作成」押下 → お知らせ新規登録へ
* 絞り込み条件を指定して「検索」 → 一覧更新
* 一覧行をクリック → お知らせ詳細へ遷移
* 一覧からも最低限の情報（件名・配信日時・タグ等）が確認できる

---

## 検索・絞り込みエリア

### 絞り込み項目（例）

* キーワード（件名／本文の部分一致）
* タグ（運営／イベント など） 
* 配信日時（From-To）
* 登録者（選択 or 入力）
* 配信状態（下記「配信状態」運用を採用する場合のみ）

  * 下書き／予約／配信済み

### 操作

* 検索
* リセット

---

## 一覧テーブル

機能一覧にある想定項目を一覧列として反映します：配信日時、件名、本文、登録者、タグ 

| 列名   | 表示内容         | 表示仕様              |
| ---- | ------------ | ----------------- |
| 配信日時 | 配信予定／配信済みの日時 | 日時表示。未設定なら `-`    |
| 件名   | お知らせタイトル     | 1行省略、ツールチップ可      |
| 本文   | お知らせ本文       | 先頭40〜80文字程度で省略表示  |
| 登録者  | 作成者（管理者名）    | 表示名               |
| タグ   | 運営／イベント等     | バッジ表示             |
| 操作   | 詳細           | `詳細` ボタン or 行クリック |

### 配信状態（運用として入れる場合）

機能一覧に「プッシュ通知送信タイミングは手動（即時・予約）で設定可能」とあるため、一覧にも状態があると運用が楽です。 

* 下書き：配信日時未設定
* 予約：配信日時が未来
* 配信済み：配信日時が過去

（この状態列を追加するなら、テーブルに「状態」列を追加）

---

## ページネーション

* 1ページ 20件
* 前へ／次へ
* ページ番号

---

## 詳細テーブル

| 部品名称        | 部品の種類 | 型    | IN | OUT | 初期値      | 表示仕様               | DB情報備考     |
| :---------- | :---- | :--- | :- | :-- | :------- | :----------------- | :--------- |
| 画面タイトル      | 見出し   | 文字列  |    | ○   | `お知らせ一覧` | 左寄せ                |            |
| 新規作成ボタン     | ボタン   | -    | ○  |     | -        | `お知らせを作成`          | CMS_00023へ |
| キーワード       | 入力    | 文字列  | ○  |     | 空        | 件名/本文検索            |            |
| タグ絞り込み      | セレクト  | ID   | ○  |     | 全て       | 運営/イベント等           |            |
| 配信日時From/To | 日付    | date | ○  |     | 空        | 期間指定               |            |
| 登録者         | 入力/選択 | 文字列  | ○  |     | 全て       | 作成者で絞り込み           |            |
| 検索ボタン       | ボタン   | -    | ○  |     | -        | 押下で一覧更新            |            |
| リセット        | ボタン   | -    | ○  |     | -        | 条件初期化              |            |
| 一覧テーブル      | テーブル  | -    |    | ○   | -        | 配信日時/件名/本文/登録者/タグ  |            |
| 詳細ボタン       | ボタン   | -    | ○  |     | -        | CMS_00022へ         |            |
| ページネーション    | UI    | -    | ○  | ○   | 1ページ目    | 20件/頁              |            |

---

## 挙動仕様

* 初期表示

  * 新しい配信日時順（降順）をデフォルト
* 検索

  * 条件変更→検索押下で反映（入力途中で自動検索はしない）
* 行クリック

  * CMS_00022（お知らせ詳細）へ遷移
* 新規作成

  * CMS_00023（新規登録）へ遷移 
* 取得失敗

  * 画面上部にエラーバナー（例：`一覧を取得できませんでした`）

---

## 備考

* 詳細画面側で「プッシュ通知を送るか」「即時／予約」が編集可能な想定のため、一覧側は配信管理の起点として使えるようにしておくと運用しやすい 
* お知らせ本文は一覧で全文表示せず、先頭のみ表示（読みやすさ優先） 
