# 動画視聴履歴 画面設計書

---

## 画面名

* 画面ID: APP-00056
* 画面名: 動画視聴履歴
* 目的:
  ユーザーが過去に視聴した動画を一覧で確認し、再視聴や履歴整理（削除）を行えるようにする。
* 遷移元:

  * マイページ（APP-00053）

    * メニュー項目「動画視聴履歴」
* 遷移先:

  * 動画詳細（APP-00027）
  * 履歴削除（同画面内操作）

---

## 画面概要

* ログインユーザーごとに **視聴済み動画の履歴一覧** を表示する。
* 表示件数は **最大20件**。
* 最新の視聴履歴が上に表示される。
* 履歴はユーザー操作により削除可能。
* 削除は

  * 個別削除
  * 全件削除
    の両方に対応する。

---

## 画面構成

### 1) ヘッダー

* 戻る（マイページへ戻る）
* 画面タイトル

  * `視聴履歴`

---

### 2) 視聴履歴一覧

**表示形式**

* 縦スクロールリスト

**1件あたりの表示要素**

* 動画サムネイル
* 動画タイトル
* 種別

  * ショート / 映画
* 再生時間
* 最終視聴日時（例：`2026/01/05`）
* 「視聴中」または「視聴済み」ラベル（任意）

※ 字幕あり／なしは **同一作品として統合表示**
※ エピソードがある作品は「最終視聴話数」を補足表示してもよい（任意）

---

### 3) 操作エリア

* 各履歴行

  * 削除アイコン（ゴミ箱）
* 画面下部

  * 「履歴をすべて削除」ボタン

---

## 詳細テーブル

| 部品名称    | 部品の種類 | 表示内容       | 備考     |
| ------- | ----- | ---------- | ------ |
| 画面タイトル  | ラベル   | 視聴履歴       | 固定     |
| 戻る      | ボタン   | ←          | マイページへ |
| 視聴履歴リスト | リスト   | 動画一覧       | 最大20件  |
| サムネイル   | 画像    | 動画サムネ      | 16:9   |
| 動画タイトル  | テキスト  | タイトル       | 2行省略   |
| 種別      | バッジ   | ショート/映画    | 表示用    |
| 再生時間    | テキスト  | mm:ss      | 表示用    |
| 視聴日時    | テキスト  | YYYY/MM/DD | 最終視聴   |
| ステータス   | ラベル   | 視聴中/視聴済    | 任意     |
| 個別削除    | アイコン  | ゴミ箱        | 確認あり   |
| 全削除     | ボタン   | 履歴をすべて削除   | 確認あり   |

---

## 挙動仕様

### 初期表示

* ログインユーザーの視聴履歴を取得
* 並び順

  * 最終視聴日時 降順
* 20件を超える履歴がある場合

  * 古い履歴から自動的に対象外（保持しない）

---

### 動画タップ時

* 該当動画の **動画詳細（AXCMS-V-002）** へ遷移
* 再生位置が保存されている場合

  * 「続きから再生」が可能（将来拡張）

---

### 履歴削除（個別）

1. ゴミ箱アイコン押下
2. 確認ダイアログ表示

   * `この履歴を削除しますか？`
3. 削除実行
4. 一覧を再描画

---

### 履歴削除（全件）

1. 「履歴をすべて削除」押下
2. 確認ダイアログ表示

   * `視聴履歴をすべて削除します。よろしいですか？`
3. 削除実行
4. 空状態表示へ遷移

---

### 空状態

* 表示文言

  * `視聴履歴はありません`
* サブ導線

  * 「動画を探す」ボタン

    * 動画一覧（AXCMS-V-001）へ遷移

---

## データ管理仕様（参考）

* user_watch_histories

  * id
  * user_id
  * content_id
  * episode_id（任意）
  * last_played_at
  * play_position
  * created_at

※ 字幕あり／なしは content_id を共通にして履歴を統合

---

## 備考

* 視聴履歴は

  * レコメンド
  * 続き再生
    への利用を想定
* プライバシー観点から

  * 明示的な削除操作を必ず提供する
* フェーズ2以降で

  * 「自動削除（◯日経過）」
  * 「お気に入りと履歴の連動」
    も検討可能
