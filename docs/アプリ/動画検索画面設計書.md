# 動画検索 画面設計書

---

## 画面名

* 画面ID: AXCMS-S-001
* 画面名: 動画検索
* 目的:
  キーワードや条件を指定して動画を検索し、目的の動画・キャストへ素早く到達できるようにする。
* 遷移元:

  * トップ（AXCMS-T-001）
  * 下部ナビ「検索」
* 遷移先:

  * 動画詳細（AXCMS-V-002）
  * スタッフキャストプロフィール画面

---

## 画面概要

* 本画面は動画・キャストを横断的に検索するための画面である。
* 上部に検索入力欄を配置し、入力内容に応じて検索結果を一覧表示する。
* 検索結果は動画を主とし、必要に応じてキャスト結果も表示する。

---

## 画面キャプチャ / ワイヤー

![wireframe](../画面設計書/images/AXCMS-S-001.png)

---

## 操作概要

* 検索欄にキーワードを入力すると検索が実行される
* 動画カードをタップすると動画詳細へ遷移する
* キャスト名をタップするとキャストプロフィール画面へ遷移する
* 下部ナビゲーションにより他画面へ遷移できる

---

## 詳細テーブル

| 部品名称        | 部品の種類     | 型      | 桁数  | IN | OUT | 初期値  | 表示仕様               | エラーNo    | DB情報備考 | テーブル名  | カラム名          |
| :---------- | :-------- | :----- | :-- | :- | :-- | :--- | :----------------- | :------- | :----- | :----- | :------------ |
| 画面タイトル      | ラベル       | 文字列    | 20  |    | ○   | `検索` | 画面上部に表示            |          | 固定文言   |        |               |
| 検索入力欄       | テキストフィールド | 文字列    | 100 | ○  |     | 空文字  | プレースホルダー「キーワードで検索」 | S-001-01 | 前後空白除去 |        |               |
| 検索アイコン      | アイコンボタン   | -      | -   | ○  |     |      | 入力欄右側              |          | タップで検索 |        |               |
| 検索結果見出し     | 見出し       | 文字列    | 20  |    | ○   | 非表示  | 「検索結果」             |          | 結果表示時  |        |               |
| 動画検索結果カード   | カード       | オブジェクト | -   |    | ○   | -    | サムネイル＋タイトル         |          | 一覧表示   | videos | video_id      |
| 動画サムネイル     | 画像        | URL    | -   |    | ○   | -    | 16:9 比率            |          | 表示用    | videos | thumbnail_url |
| 動画タイトル      | テキスト      | 文字列    | 120 |    | ○   | -    | 2行まで表示             |          | 表示用    | videos | title         |
| 動画価格        | ラベル       | 数値     | -   |    | ○   | -    | 「◯◯コイン」表記          |          | 有料のみ表示 | videos | price_coin    |
| キャスト検索結果    | リスト       | オブジェクト | -   |    | ○   | 非表示  | 動画結果下に表示           |          | 任意表示   | casts  | cast_id       |
| キャスト名       | テキスト      | 文字列    | 50  |    | ○   | -    | 1行表示               |          | 表示用    | casts  | name          |
| 検索結果なしメッセージ | テキスト      | 文字列    | 100 |    | ○   | 非表示  | 「該当する結果がありません」     | S-001-02 | 表示のみ   |        |               |
| 下部ナビ：ホーム    | ナビボタン     | -      | -   | ○  |     |      | 未選択                |          | トップ遷移  |        |               |
| 下部ナビ：動画     | ナビボタン     | -      | -   | ○  |     |      | 未選択                |          | 動画一覧   |        |               |
| 下部ナビ：キャスト   | ナビボタン     | -      | -   | ○  |     |      | 未選択                |          | キャスト一覧 |        |               |
| 下部ナビ：検索     | ナビボタン     | -      | -   | ○  |     | 選択中  | 選択状態表示             |          | 現在画面   |        |               |
| 下部ナビ：マイページ  | ナビボタン     | -      | -   | ○  |     |      | 未選択                |          | マイページ  |        |               |

---

## 挙動仕様

* 画面表示時

  * 初期状態では検索結果は表示しない

* 検索処理

  * 検索入力欄に文字入力後、確定操作で検索APIを実行
  * 検索API（PH1）

    * `GET /v1/search?q=<keyword>`
    * レスポンス例

      ```json
      {
        "videos": [
          {
            "id": "v1",
            "title": "ダウトコール 第01話",
            "ratingAvg": 4.7,
            "reviewCount": 128,
            "priceCoin": 0,
            "thumbnailUrl": ""
          }
        ],
        "casts": [
          {
            "id": "a1",
            "name": "松岡美沙",
            "role": "出演者",
            "thumbnailUrl": ""
          }
        ]
      }
      ```
  * キーワードは以下を対象に部分一致検索を行う

    * 動画タイトル
    * 動画説明文
    * キャスト名

* 検索結果表示

  * 動画検索結果を上位に表示
  * キャスト結果は該当がある場合のみ表示
  * 有料動画は価格を併記する

* 検索結果なし

  * 該当結果が0件の場合、検索結果なしメッセージを表示

* 遷移

  * 動画カードタップ時は動画詳細へ遷移
  * キャスト名タップ時はキャストプロフィール画面へ遷移

* 通信失敗時

  * エラーメッセージを表示
  * 入力内容は保持する

---

## 備考

* 将来的に以下の拡張を想定

  * 絞り込み条件（価格／キャスト／公開日）
  * 並び替え（新着順／人気順）
  * 検索履歴・サジェスト表示
* 検索APIはページング対応を前提とする
