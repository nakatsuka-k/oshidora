# コイン付与画面 設計書

---

## 画面名

* 画面ID：APP-COIN-GRANT-001
* 画面名：コイン付与
* 目的：
  購入・付与されたコインが正常に反映されたことをユーザーに通知・確認させる（コインは推しポイント付与に使用する）。
* 遷移元：

  * コイン購入画面（AXCMS-COIN-001）

    * Stripe決済完了後
  * 管理側コイン付与処理完了後（キャンペーン・補填など）
* 遷移先：

  * マイページ（APP-MYP-001）
  * 直前画面（推しポイント付与など、必要に応じて）

---

## 画面概要

* コイン付与完了を伝える確認用画面
* ユーザーが「何コイン付与されたか」「現在の残高」を把握できる
* 二重課金・反映漏れの不安を解消する目的を持つ

---

## 画面構成

### ヘッダー

* 中央：`コイン付与完了`
* 左／右：なし（完了画面のため）

---

## セクション①：付与完了メッセージ

* アイコン（チェックマーク等）
* メッセージ例

  * `コインが付与されました`
  * `ご利用ありがとうございます`

---

## セクション②：付与内容表示

### 表示項目

1. **付与コイン数**

   * 表示例

     * `付与コイン：＋1,000コイン`

2. **付与理由**

   * 表示例

     * コイン購入
     * キャンペーン付与
     * 運営からの補填

3. **付与日時**

   * 年月日＋時刻

---

## セクション③：現在のコイン残高

* 大きめに表示

  * `現在のコイン残高：3,250コイン`

---

## 操作エリア

### 表示ボタン

* **直前画面へ戻る**

  * 表示条件

    * 直前画面が存在する場合（推しポイント付与など）
  * 押下時

    * 元の画面へ戻る

* **マイページへ戻る**

  * 押下時

    * マイページへ遷移

---

## 操作フロー

### コイン購入後

1. Stripe決済完了
2. コイン付与処理実行
3. 本画面を表示

---

### 管理側付与（キャンペーン等）

1. 管理画面からコイン付与
2. 次回ログイン時 or 即時本画面表示

   * またはマイページ上で確認のみ

---

## 挙動仕様

* 本画面表示時点で

  * コイン残高はすでに更新済み
* 再読み込みしても

  * 二重付与は行われない
* 戻る操作は行わず

  * 明示的なボタン操作のみで遷移

---

## 表示・保存データ

* ユーザーID
* 付与コイン数
* 付与理由
* 付与日時
* 付与後コイン残高

---

## 備考

* Stripe決済の成否は本画面では表示しない

  * 失敗時は別エラー画面を表示
* コイン付与履歴は

  * マイページ → コイン履歴画面（将来追加）
    から参照できる想定
* 不正防止のため

  * クライアント側で付与数を計算しない
