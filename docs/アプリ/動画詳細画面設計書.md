# 動画詳細 画面設計書

---

## 画面名

* 画面ID: AXCMS-V-002
* 画面名: 動画詳細
* 目的:
  選択された動画を再生し、動画情報・キャスト情報・関連コンテンツへの導線を提供する。
* 遷移元:

  * トップ（AXCMS-T-001）
  * 動画一覧（AXCMS-V-001）
* 遷移先:

  * キャスト詳細
  * 別動画詳細
  * 下部ナビ（ホーム / 動画 / キャスト / 検索 / マイページ）

---

## 画面概要

* 本画面は動画コンテンツの視聴を主目的とした詳細画面である。
* 動画再生エリアを最上部に配置し、その下に動画情報・キャスト・関連動画を表示する。
* 下部ナビゲーションにより他機能への遷移を可能とする。

---

## 仕様追記（PH1反映）

* カテゴリ表示

  * 動画/作品に紐づくカテゴリ（チップ等）を表示する
* キャスト/スタッフ一覧

  * 「出演キャスト・スタッフ」を一覧表示し、タップでスタッフキャストプロフィール詳細へ遷移する
* SNSシェア

  * OS共有（X/LINE/Instagram/リンクコピー等）を起動する
  * 共有リンクはブラウザで表示される軽量ページとし、OGメタ（`og:image` 等）でサムネイルが表示されるように明示的に設定する
* アクセス制御

  * 動画はログアウトでも閲覧可能
  * キャスト/スタッフのプロフィール詳細はログイン必須（未ログイン時はログイン導線へ）

---

## 画面キャプチャ / ワイヤー

![wireframe](../画面設計書/images/AXCMS-V-002.png)

---

## 操作概要

* 動画は画面上部のプレイヤーで再生される
* お気に入りボタンにより動画をお気に入り登録／解除できる
* キャスト名・サムネイルをタップするとキャスト詳細へ遷移する
* 関連動画をタップすると対象の動画詳細へ遷移する

---

## 詳細テーブル

| 部品名称       | 部品の種類  | 型      | 桁数   | IN | OUT | 初期値    | 表示仕様          | エラーNo    | DB情報備考     | テーブル名     | カラム名         |
| :--------- | :----- | :----- | :--- | :- | :-- | :----- | :------------ | :------- | :--------- | :-------- | :----------- |
| 動画プレイヤー    | 動画再生UI | URL    | -    |    | ○   | -      | 画面上部固定、16:9比率 | V-002-01 | ストリーミングURL | videos    | stream_url   |
| 再生コントロール   | UI制御   | -      | -    | ○  |     | -      | 再生・停止・シーク     |          | 標準UI       |           |              |
| 動画タイトル     | テキスト   | 文字列    | 120  |    | ○   | -      | プレイヤー直下に表示    |          | 表示用        | videos    | title        |
| 動画説明文      | テキスト   | 文字列    | 1000 |    | ○   | -      | 折りたたみ表示可      |          | 表示用        | videos    | description  |
| 再生数        | ラベル    | 数値     | -    |    | ○   | 0      | 「◯回再生」形式      |          | 集計値        | videos    | view_count   |
| 公開日        | ラベル    | 日付     | -    |    | ○   | -      | YYYY/MM/DD 表示 |          | 表示用        | videos    | published_at |
| お気に入りボタン   | トグルボタン | 真偽値    | 1    | ○  |     | OFF    | 星/ハートアイコン     | V-002-02 | ユーザー別管理    | favorites | video_id     |
| キャスト見出し    | 見出し    | 文字列    | 10   |    | ○   | `キャスト` | セクション先頭       |          | 固定文言       |           |              |
| キャストカード    | カード    | オブジェクト | -    |    | ○   | -      | 横並び表示         |          | 出演者順       | casts     | cast_id      |
| キャスト名      | テキスト   | 文字列    | 50   |    | ○   | -      | サムネイル下表示      |          | 表示用        | casts     | name         |
| 関連動画見出し    | 見出し    | 文字列    | 10   |    | ○   | `関連動画` | セクション先頭       |          | 固定文言       |           |              |
| 関連動画カード    | カード    | オブジェクト | -    |    | ○   | -      | 縦リスト表示        |          | 同カテゴリ優先    | videos    | video_id     |
| 下部ナビ：ホーム   | ナビボタン  | -      | -    | ○  |     |        | 未選択           |          | トップ遷移      |           |              |
| 下部ナビ：動画    | ナビボタン  | -      | -    | ○  |     | 選択中    | 選択状態表示        |          | 現在系統       |           |              |
| 下部ナビ：キャスト  | ナビボタン  | -      | -    | ○  |     |        | 未選択           |          | キャスト一覧     |           |              |
| 下部ナビ：検索    | ナビボタン  | -      | -    | ○  |     |        | 未選択           |          | 検索画面       |           |              |
| 下部ナビ：マイページ | ナビボタン  | -      | -    | ○  |     |        | 未選択           |          | マイページ      |           |              |

---

## 挙動仕様

* 画面表示時に以下の情報を取得する

  * 動画情報
  * 再生URL
  * キャスト情報
  * 関連動画
  * お気に入り状態（ログインユーザー）

* 動画再生

  * 初回表示時は停止状態
  * ユーザー操作により再生開始
  * 再生開始時に再生数をインクリメント

* お気に入り

  * ボタンタップで即時切り替え
  * 通信失敗時は元の状態に戻しエラー表示

* キャスト／関連動画

  * タップ時に対応する詳細画面へ遷移
  * 同一画面内での動画切り替えは行わず、必ず再遷移とする

* データ取得失敗時

  * 動画が取得できない場合はエラーメッセージ表示後、前画面へ戻す
  * キャスト・関連動画取得失敗時は該当セクションのみ非表示

---

## 備考

* 動画説明文は将来的に

  * URLリンク
  * ハッシュタグ
    に対応できる構造とする
* 関連動画の算出ロジックは

  * 同カテゴリ
  * 同キャスト
    を優先条件とする
* コメント機能を追加する場合は、動画説明文下にセクションを追加する想定
