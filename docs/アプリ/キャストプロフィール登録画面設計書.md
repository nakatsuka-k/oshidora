# キャストプロフィール登録画面 設計書

---

## 画面名

* 画面ID：APP-CAST-PROF-REG-001
* 画面名：キャストプロフィール登録
* 目的：
  ユーザーがキャスト・スタッフなどのプロフィール情報（氏名、所属、ジャンル、経歴、代表作、SNSリンク、自己PR文）を登録し、プラットフォーム内で公開されるための情報を提供する。
* 遷移元：

  * マイページ（APP-MYP-001）

    * 「キャストプロフィール登録」押下
* 遷移先：

  * マイページ（APP-MYP-001）

    * 登録完了時
    * キャンセル時

---

## 画面概要

* ユーザーがキャスト・スタッフプロフィール情報を登録する画面
* 全ユーザーが登録可能（俳優でなくても利用可）
* 登録後、運営の承認を待つ
* 承認されるとキャスト一覧・検索結果に表示される
* 公開後は「公式マーク」などの認証マークが付与される想定

---

## 画面構成

### ヘッダー

* 左：戻る

  * 編集中の場合は確認ダイアログ表示
* 中央：`キャストプロフィール登録`
* 右：`完了` または `保存`

---

## セクション①：登録状態表示

### 表示項目

* **登録ステータス**

  * 未登録 / 承認待ち / 公開中
  * ステータス別に表示内容・操作可能範囲を切り替え

---

## セクション②：基本情報

### 表示項目

1. **氏名（本名・芸名）**

   * テキスト入力
   * プロフィール画面で表示される正式な名前

2. **所属**

   * テキスト入力
   * 制作会社名・フリーランス等

3. **ジャンル**

   * 複数選択チェックボックス
   * 例：女優 / 俳優 / 脚本 / 演出 / 制作 / その他
   * 複数選択可能

4. **経歴**

   * テキストエリア（複数行）
   * 学歴・職歴など

5. **代表作**

   * テキストエリア（複数行）
   * 出演作品や作品名のリスト

6. **SNSリンク**

   * テキスト入力（複数項目）
   * Instagram / X / TikTok / YouTube / 公式サイト等
   * URLを保存

7. **自己PR文**

   * テキストエリア（複数行）
   * 人物紹介・アピール文（最大500字程度）

---

## 登録ステータス別の操作

### 1. 未登録状態

* すべての項目が入力可能
* 「保存」タップで情報を送信
* 送信後は「承認待ち」状態へ遷移

---

### 2. 承認待ち状態

* 情報の表示のみ（編集不可）
* 「承認中です」メッセージを表示
* 承認結果をメールで通知する旨を表示

---

### 3. 公開中状態

* 登録情報を編集可能
* 「編集」ボタンタップで編集モードへ
* 「公式マーク」が付与されている状態を表示
* 編集完了後、再度運営の承認が必要な場合は「更新申請」となる

---

## 操作フロー

### 新規登録

* マイページ → キャストプロフィール登録で遷移
* 未登録状態で全項目空欄
* 入力後「保存」でAPI送信
* 「承認待ち」状態へ自動遷移

---

### 編集・更新

* 「公開中」状態から編集開始
* 編集内容を変更
* 「保存」で変更を送信
* 重大な変更の場合は再承認、軽微な変更は自動反映

---

### キャンセル（戻る）

* 編集内容がある場合

  * 確認ダイアログ表示

    * `編集内容を保存せずに戻りますか？`
* 保存せずマイページへ戻る

---

## 挙動仕様

* 情報は常にサーバー側を正とし、クライアント側での計算は行わない
* SNSリンクは複数個登録可能（動的に行を追加できる）
* 自己PR文は文字数リアルタイムカウント表示
* 登録情報の確認画面を挟むか、そのまま送信するかは仕様選択

---

## 表示データ・保存対象

* 氏名
* 所属
* ジャンル（複数）
* 経歴
* 代表作
* SNSリンク（複数）
* 自己PR文
* 登録ステータス
* 承認日時（承認済みの場合）

---

## エラー定義

| エラーNo | 発生条件 | 表示文言 | 復帰 |
| :------ | :---- | :----- | :--- |
| CAST-REG-001 | 必須項目未入力 | 必須項目を入力してください | 入力修正 |
| CAST-REG-002 | 氏名の長さ超過 | 氏名は50文字以内で入力してください | 入力修正 |
| CAST-REG-003 | PR文の文字数超過 | 自己PR文は500文字以内で入力してください | 入力修正 |
| CAST-REG-004 | 登録API失敗 | キャストプロフィールの登録に失敗しました。時間をおいて再度お試しください | 再試行 |

---

## API/データ仕様

### 登録・更新

* `POST /api/cast-profiles`

  * body: `{ name, affiliation, genres[], biography, representative_works, social_links[], self_pr }`
  * 新規登録時に自動で「承認待ち」状態に設定

### 取得

* `GET /api/cast-profiles/me`

  * 現在ログイン中ユーザーのキャストプロフィール情報を取得
  * ステータス、承認日時、公開URL等を含む

### 承認状態の更新（管理側API）

* `PATCH /api/admin/cast-profiles/{id}/approve`

  * 運営側で承認・却下を行う

---

## 備考

* キャストプロフィール承認は、不適切内容（誹謗中傷、広告等）をチェックする想定
* 公開後のプロフィール編集は軽い変更は自動反映、大きな変更は再承認を検討
* 将来的にキャスト検索・一覧表示でフィルタリング対象とする予定

