# お気に入り編集 画面設計書

---

## 画面名

* 画面ID: APP-00055
* 画面名: お気に入り一覧（編集モード）
* 目的:
  お気に入りに登録した **キャスト／スタッフ** と **動画** を一覧で確認し、不要な項目を削除して整理できるようにする。
* 遷移元（添付の遷移図・機能一覧を前提）:

  * マイページ（APP-00053）→ お気に入り
    * ※ `/favorites`（お気に入り）は最初に「動画 / キャスト」を選択してから各一覧へ遷移する
  * お気に入りキャスト一覧（AXCMS-FAV-CAST-001）ヘッダーの「編集」
  * お気に入り動画一覧（AXCMS-FAV-VID-001）ヘッダーの「編集」 
* 遷移先:

  * お気に入りキャスト一覧（編集完了で戻る） 
  * お気に入り動画一覧（編集完了で戻る） 

  * （お気に入り一覧としての基本遷移）お気に入り動画 → 動画詳細（APP-00027）

---

## 画面概要

* お気に入りを「キャスト／スタッフ」「動画」で切り替えて編集できる。
* 編集内容は「削除」を中心に扱う。
* 編集中は、タップ挙動が詳細遷移ではなく「選択」に変わる。
* 編集確定は「完了」で一括反映、戻る場合は「キャンセル」で破棄。

---

## 画面構成

### ヘッダー

* 戻る（キャンセル扱いで前画面へ）
* タイトル：`お気に入り編集`
* 右上：`完了`

### タブ

* `キャスト`
* `動画`

### リスト（共通）

* 各行にチェックボックス（選択状態）
* サムネイル／プロフィール画像
* タイトル（キャスト名 or 動画タイトル）
* 補足情報（任意）

  * キャスト：ジャンル（俳優/脚本など）
  * 動画：再生時間、評価数など

### 下部操作バー（固定）

* 選択数表示：`選択中：◯件`
* `選択を解除`
* `削除`

---

## 操作概要

* タブで対象を切り替える
* 行タップで選択／選択解除
* 「削除」で選択分をお気に入りから削除
* 「完了」で確定して一覧へ戻る
* 「戻る」で編集内容を破棄して一覧へ戻る（確認ダイアログあり）

---

## 詳細テーブル

| 部品名称     | 部品の種類    | 型    | IN | OUT | 初期値     | 表示仕様          | DB情報備考        |
| -------- | -------- | ---- | -- | --- | ------- | ------------- | ------------- |
| 画面タイトル   | ラベル      | 文字列  |    | ○   | お気に入り編集 | ヘッダー中央        | 固定文言          |
| 戻る       | ボタン      | -    | ○  |     |         | 破棄して戻る        | 破棄確認あり        |
| 完了       | ボタン      | -    | ○  |     |         | 変更確定して戻る      | 変更がある時のみ活性でも可 |
| タブ：キャスト  | タブ       | -    | ○  |     | 選択      | キャスト編集        |               |
| タブ：動画    | タブ       | -    | ○  |     |         | 動画編集          |               |
| お気に入りリスト | リスト      | -    |    | ○   | -       | 縦スクロール        |               |
| 選択チェック   | チェックボックス | bool | ○  |     | false   | 行左            | UI状態          |
| サムネ／画像   | 画像       | URL  |    | ○   | -       | キャストは丸、動画は四角  | 表示用           |
| 名称       | テキスト     | 文字列  |    | ○   | -       | 2行省略          | 表示用           |
| 補足情報     | テキスト     | 文字列  |    | ○   | -       | 任意表示          | 表示用           |
| 選択数表示    | ラベル      | 数値   |    | ○   | 0       | `選択中：◯件`      | UI状態          |
| 選択解除     | ボタン      | -    | ○  |     |         | 全解除           |               |
| 削除       | ボタン      | -    | ○  |     | 非活性     | 選択>0で活性       | 一括削除          |
| 空状態      | テキスト     | 文字列  |    | ○   | 非表示     | `お気に入りはありません` | 対象0件          |

---

## 挙動仕様

### 初期表示

* 遷移元に応じて初期タブを決定

  * お気に入りキャスト一覧から来た → キャストタブ
  * お気に入り動画一覧から来た → 動画タブ
* 対象タブの一覧を取得して表示

### 選択操作

* 行タップで選択／解除
* 選択中件数を下部に反映
* 編集中は、行タップで詳細画面へ遷移しない

  * （通常一覧ではキャスト詳細／動画詳細へ遷移する導線があるため、編集モードでは無効化）

### 削除

* 「削除」押下で確認ダイアログ

  * `選択した◯件をお気に入りから削除しますか？`
* OKで削除実行
* 成功後、リストから即時除去
* 失敗時はエラーメッセージ表示（入力状態＝選択状態は保持）

### 完了

* 「完了」押下で編集結果を確定
* 遷移元の一覧画面へ戻る

  * お気に入りキャスト一覧／お気に入り動画一覧 

### キャンセル（戻る）

* 変更がある場合は確認

  * `変更を破棄して戻りますか？`
* 破棄して前画面へ戻る

### 空状態

* 0件の場合は空状態を表示

  * キャストタブ：`お気に入りキャストがありません`
  * 動画タブ：`お気に入り動画がありません`

---

## API/データ仕様（画面連携レベル）

* お気に入り一覧取得

  * `GET /api/favorites/casts`
  * `GET /api/favorites/videos`

* 削除（複数対応）

  * `DELETE /api/favorites/casts` body: `{ ids: [...] }`
  * `DELETE /api/favorites/videos` body: `{ ids: [...] }`

---

## 備考

* 遷移図上は

  * お気に入りキャスト一覧 → キャスト詳細 
  * お気に入り動画一覧 → 動画詳細 
    の導線があるため、編集時は誤遷移防止のため「選択優先」にする。
* 並び替え（ドラッグで順序変更）は要件に入っていないため、現時点では削除のみ対応。追加する場合は別途「並び順保存」の仕様が必要。
